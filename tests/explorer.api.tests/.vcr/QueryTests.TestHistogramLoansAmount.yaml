httpInteractions:
- request:
    method: POST
    uri: https://attack.aircloak.com/api/queries
    body:
      encoding: UTF8-8BIT
      text: |-
        {"query":{"statement":"\r\n                        select\r\n                            grouping_id(\r\n                                bucket(amount by 10000),bucket(amount by 20000),bucket(amount by 50000)\r\n                            ),\r\n                            3 as num_buckets,\r\n                            bucket(amount by 10000),bucket(amount by 20000),bucket(amount by 50000),\r\n                            count(*),\r\n                            count_noise(*)\r\n                        from loans\r\n                        group by grouping sets (System.Linq.Enumerable\u002BRangeIterator)","data_source_name":"gda_banking"}}
    headers:
      auth-token:
      - SFMyNTY.g3QAAAACZAAEZGF0YW0AAAAkNWEwOGU5MGUtODJjOC00ZmY2LTkyZmItNGJmN2E2ZTY3YjdhZAAGc2lnbmVkbgYA-oOX9W8B.55CiWZ7Jx1oUBq6t-rHU_VGA1jPtIMzHGzgq49Xcrm8
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx/1.6.2
      Date:
      - Wed, 12 Feb 2020 20:42:40 GMT
      Connection:
      - keep-alive
      Cache-Control:
      - must-revalidate, max-age=0, private
      X-Request-ID:
      - FfLCZZh-vJBGthg6d2qB
      Strict-Transport-Security:
      - max-age=31556926; includeSubdomains
      Content-Type:
      - application/json; charset=utf-8
      Content-Length:
      - 66
    body:
      encoding: UTF8-8BIT
      text: |-
        {"success":true,"query_id":"9a03bb2d-fd8a-4048-a9bf-deef9e4b060a"}
- request:
    method: GET
    uri: https://attack.aircloak.com/api/queries/9a03bb2d-fd8a-4048-a9bf-deef9e4b060a
    body:
      encoding: ''
      text: ""
    headers:
      auth-token:
      - SFMyNTY.g3QAAAACZAAEZGF0YW0AAAAkNWEwOGU5MGUtODJjOC00ZmY2LTkyZmItNGJmN2E2ZTY3YjdhZAAGc2lnbmVkbgYA-oOX9W8B.55CiWZ7Jx1oUBq6t-rHU_VGA1jPtIMzHGzgq49Xcrm8
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx/1.6.2
      Date:
      - Wed, 12 Feb 2020 20:42:40 GMT
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Cache-Control:
      - must-revalidate, max-age=0, private
      X-Request-ID:
      - FfLCZZ6eWbhGthg6d2rB
      Strict-Transport-Security:
      - max-age=31556926; includeSubdomains
      Content-Type:
      - application/json; charset=utf-8
    body:
      encoding: UTF8-8BIT
      text: |-
        {"query":{"buckets_link":"/queries/9a03bb2d-fd8a-4048-a9bf-deef9e4b060a/buckets","completed":false,"data_source":{"name":"gda_banking"},"data_source_id":9,"id":"9a03bb2d-fd8a-4048-a9bf-deef9e4b060a","inserted_at":"2020-02-12T20:42:40.777119","private_permalink":"/permalink/private/query/SFMyNTY.g3QAAAACZAAEZGF0YWgDZAAHcHJpdmF0ZWQABXF1ZXJ5bQAAACQ5YTAzYmIyZC1mZDhhLTQwNDgtYTliZi1kZWVmOWU0YjA2MGFkAAZzaWduZWRuBgButSM7cAE.fY-kBe-ZW1X9P_Dt1mN5n9R9LuDrIYUE9ZC8A7rxTwQ","public_permalink":"/permalink/public/query/SFMyNTY.g3QAAAACZAAEZGF0YWgDZAAGcHVibGljZAAFcXVlcnltAAAAJDlhMDNiYjJkLWZkOGEtNDA0OC1hOWJmLWRlZWY5ZTRiMDYwYWQABnNpZ25lZG4GAG-1IztwAQ.FC-QbodqVeVuuFFmV7mPJgHWEHzyaGMAEgoMViTkJQM","query_state":"started","session_id":null,"statement":"\r\n                        select\r\n                            grouping_id(\r\n                                bucket(amount by 10000),bucket(amount by 20000),bucket(amount by 50000)\r\n                            ),\r\n                            3 as num_buckets,\r\n                            bucket(amount by 10000),bucket(amount by 20000),bucket(amount by 50000),\r\n                            count(*),\r\n                            count_noise(*)\r\n                        from loans\r\n                        group by grouping sets (System.Linq.Enumerable+RangeIterator)","user":{"name":"Andrei Bozântan"},"rows":[]}}
- request:
    method: GET
    uri: https://attack.aircloak.com/api/queries/9a03bb2d-fd8a-4048-a9bf-deef9e4b060a
    body:
      encoding: ''
      text: ""
    headers:
      auth-token:
      - SFMyNTY.g3QAAAACZAAEZGF0YW0AAAAkNWEwOGU5MGUtODJjOC00ZmY2LTkyZmItNGJmN2E2ZTY3YjdhZAAGc2lnbmVkbgYA-oOX9W8B.55CiWZ7Jx1oUBq6t-rHU_VGA1jPtIMzHGzgq49Xcrm8
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx/1.6.2
      Date:
      - Wed, 12 Feb 2020 20:42:43 GMT
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Cache-Control:
      - must-revalidate, max-age=0, private
      X-Request-ID:
      - FfLCZh2a8UJGthg6d2wB
      Strict-Transport-Security:
      - max-age=31556926; includeSubdomains
      Content-Type:
      - application/json; charset=utf-8
    body:
      encoding: UTF8-8BIT
      text: |-
        {"query":{"buckets_link":"/queries/9a03bb2d-fd8a-4048-a9bf-deef9e4b060a/buckets","completed":true,"data_source":{"name":"gda_banking"},"data_source_id":9,"id":"9a03bb2d-fd8a-4048-a9bf-deef9e4b060a","inserted_at":"2020-02-12T20:42:40.777119","private_permalink":"/permalink/private/query/SFMyNTY.g3QAAAACZAAEZGF0YWgDZAAHcHJpdmF0ZWQABXF1ZXJ5bQAAACQ5YTAzYmIyZC1mZDhhLTQwNDgtYTliZi1kZWVmOWU0YjA2MGFkAAZzaWduZWRuBgDBvSM7cAE.xCztvaKVSziqgHIp3dVlZVlzysEekKNQUiE25S4V9FM","public_permalink":"/permalink/public/query/SFMyNTY.g3QAAAACZAAEZGF0YWgDZAAGcHVibGljZAAFcXVlcnltAAAAJDlhMDNiYjJkLWZkOGEtNDA0OC1hOWJmLWRlZWY5ZTRiMDYwYWQABnNpZ25lZG4GAMG9IztwAQ.p35zQOOD1apeMxtBLizGG2sIDGz9Anvd66MeVgPY2q8","query_state":"error","session_id":null,"statement":"\r\n                        select\r\n                            grouping_id(\r\n                                bucket(amount by 10000),bucket(amount by 20000),bucket(amount by 50000)\r\n                            ),\r\n                            3 as num_buckets,\r\n                            bucket(amount by 10000),bucket(amount by 20000),bucket(amount by 50000),\r\n                            count(*),\r\n                            count_noise(*)\r\n                        from loans\r\n                        group by grouping sets (System.Linq.Enumerable+RangeIterator)","user":{"name":"Andrei Bozântan"},"columns":null,"error":"Missing FROM clause entry for table `System`.\n\nThe error was detected at line 11, column 49:\n\n\t10:                           from loans\r\n\t11:                           group by grouping sets (System.Linq.Enumerable+RangeIterator)\n\t                                                      ^\n","info":null,"log":"2020-02-12 20:42:40.000 [debug] Running statement `\r\n                        select\r\n                            grouping_id(\r\n                                bucket(amount by 10000),bucket(amount by 20000),bucket(amount by 50000)\r\n                            ),\r\n                            3 as num_buckets,\r\n                            bucket(amount by 10000),bucket(amount by 20000),bucket(amount by 50000),\r\n                            count(*),\r\n                            count_noise(*)\r\n                        from loans\r\n                        group by grouping sets (System.Linq.Enumerable+RangeIterator)` ...\n2020-02-12 20:42:40.000 [debug] Query 9a03bb2d-fd8a-4048-a9bf-deef9e4b060a state changed to: parsing...\n2020-02-12 20:42:40.000 [debug] Query 9a03bb2d-fd8a-4048-a9bf-deef9e4b060a state changed to: compiling...\n2020-02-12 20:42:40.000 [info] JSON_LOG {\"execution_time\":107,\"query_id\":\"9a03bb2d-fd8a-4048-a9bf-deef9e4b060a\",\"status\":\"Missing FROM clause entry for table `System`.\\n\\nThe error was detected at line 11, column 49:\\n\\n\\t10:                           from loans\\r\\n\\t11:                           group by grouping sets (System.Linq.Enumerable+RangeIterator)\\n\\t                                                      ^\\n\",\"type\":\"query_complete\"}\n2020-02-12 20:42:40.000 [info] query finished\n","row_count":0,"types":null,"rows":[]}}
